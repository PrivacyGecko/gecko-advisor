name: privacy-advisor-prod
services:
  backend:
    extends:
      file: ./docker-compose.yml
      service: backend
    env_file:
      - ./env/production.env
    environment:
      APP_ENV: production
      BASE_URL: ${BASE_URL:-https://geckoadvisor.com}
      BACKEND_PUBLIC_URL: ${BACKEND_PUBLIC_URL:-https://api.geckoadvisor.com}
      FRONTEND_PUBLIC_URL: ${FRONTEND_PUBLIC_URL:-https://geckoadvisor.com}
      ADMIN_API_KEY: ${ADMIN_API_KEY:?Set production ADMIN_API_KEY}
  worker:
    extends:
      file: ./docker-compose.yml
      service: worker
    env_file:
      - ./env/production.env
    environment:
      APP_ENV: production
      WORKER_PUBLIC_URL: ${WORKER_PUBLIC_URL:-https://worker.geckoadvisor.com}
  frontend:
    extends:
      file: ./docker-compose.yml
      service: frontend
    env_file:
      - ./env/production.env
    environment:
      APP_ENV: production
      FRONTEND_PUBLIC_URL: ${FRONTEND_PUBLIC_URL:-https://geckoadvisor.com}
      BACKEND_PUBLIC_URL: ${BACKEND_PUBLIC_URL:-https://api.geckoadvisor.com}
      # CSP is read from env_file (production.env), no need to override here
volumes:
  privacy-postgres:
  privacy-redis:



